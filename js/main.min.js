!function(){var e=document.querySelector(".callback-link"),a=document.querySelector(".modal-callback"),t=a.querySelector(".modal-close"),l=a.querySelector("form"),o=a.querySelector("[name=username]"),r=a.querySelector("[name=email]"),s=a.querySelector("[name=message]"),c=!0,n="";try{n=localStorage.getItem("data"),n=JSON.parse(n)}catch(e){c=!1}e.addEventListener("click",function(e){e.preventDefault(),a.classList.add("modal-show"),n&&(n.username?(o.value=n.username,n.email?(r.value=n.email,s.focus()):r.focus()):o.focus())}),t.addEventListener("click",function(e){e.preventDefault(),a.classList.remove("modal-show"),a.classList.remove("modal-error")}),l.addEventListener("submit",function(e){o.value&&r.value&&s.value?c&&(n=JSON.stringify({username:o.value,email:r.value}),localStorage.setItem("data",n)):(e.preventDefault(),a.classList.remove("modal-error"),a.offsetWidth=a.offsetWidth,a.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),a.classList.contains("modal-show")&&(a.classList.remove("modal-show"),a.classList.remove("modal-error")))})}();
